<!DOCTYPE html>
<html>
<head>
    <title>Flag Listener</title>
    <script>
        function sendFlagToBackend(flag) {
            fetch('/api/flag', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ flag: flag }),
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok.');
                }
                return response.json();
            })
            .then(data => {
                console.log('Flag sent to backend:', data.message);
            })
            .catch(error => {
                console.error('There was an error sending the flag:', error);
            });
        }

        function handleFlagChange() {
            // Here, you would capture the change in flag status in your HTML/JS
            // For example, if a checkbox is checked/unchecked, you'd capture that state
            // and call the sendFlagToBackend function with the flag value
            let flag = document.getElementById('flagCheckbox').checked;
            sendFlagToBackend(flag);
        }
    </script>
</head>
<body>
    <h1>Flag Listener</h1>
    <label for="flagCheckbox">Flag:</label>
    <input type="checkbox" id="flagCheckbox" onchange="handleFlagChange()">
</body>
</html>
